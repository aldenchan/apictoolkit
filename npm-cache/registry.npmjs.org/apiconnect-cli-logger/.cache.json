{"_id":"apiconnect-cli-logger","_rev":"57-6ae4a9f53ee271b83e8cf3d7f4b53c8d","name":"apiconnect-cli-logger","description":"Common logger for API Connect Toolkit CLI","dist-tags":{"latest":"1.2.0","apic-v5.0.1.0":"1.1.0"},"versions":{"1.0.1":{"name":"apiconnect-cli-logger","version":"1.0.1","description":"Common logger for API Connect Toolkit CLI","main":"logger.js","scripts":{"pretest":"eslint --ignore-path .gitignore .","test":"tap --bail --timeout=1000 ./test/test-*"},"repository":{"type":"git","url":"git@github.ibm.com:apimesh/apiconnect-cli-logger.git"},"author":{"name":"IBM API Mesh"},"license":"SEE LICENSE IN LICENSE.txt","bugs":{"url":"https://github.ibm.com/apimesh/apiconnect-cli-logger/issues"},"dependencies":{"bluebird":"^3.2.1","mv":"~2","bunyan":"^1.7.1","colors":"^1.1.2","deep-extend":"^0.4.1","mkdirp":"^0.5.1","osenv":"^0.1.3","stream":"0.0.2"},"devDependencies":{"eslint":"^1.6.0","eslint-config-apimesh":"^1.x","tap":"^5.x"},"gitHead":"471ca882e02ddc9b897228d32525f652164c9549","_id":"apiconnect-cli-logger@1.0.1","_shasum":"1ac5d5fa2c8f231e2b567a9483120415d472601f","_from":".","_npmVersion":"3.8.0","_nodeVersion":"4.3.2","_npmUser":{"name":"kraman","email":"kraman@strongloop.com"},"dist":{"shasum":"1ac5d5fa2c8f231e2b567a9483120415d472601f","tarball":"https://registry.npmjs.org/apiconnect-cli-logger/-/apiconnect-cli-logger-1.0.1.tgz"},"maintainers":[{"name":"kraman","email":"kraman@strongloop.com"}],"_npmOperationalInternal":{"host":"packages-13-west.internal.npmjs.com","tmp":"tmp/apiconnect-cli-logger-1.0.1.tgz_1458583884580_0.21145675866864622"},"directories":{}},"1.0.2":{"name":"apiconnect-cli-logger","version":"1.0.2","description":"Common logger for API Connect Toolkit CLI","main":"logger.js","scripts":{"pretest":"eslint --ignore-path .gitignore .","test":"tap --bail --timeout=1000 ./test/test-*"},"repository":{"type":"git","url":"git@github.ibm.com:apimesh/apiconnect-cli-logger.git"},"author":{"name":"IBM API Mesh"},"license":"SEE LICENSE IN LICENSE.txt","bugs":{"url":"https://github.ibm.com/apimesh/apiconnect-cli-logger/issues"},"dependencies":{"bluebird":"^3.2.1","mv":"~2","bunyan":"^1.7.1","colors":"^1.1.2","deep-extend":"^0.4.1","mkdirp":"^0.5.1","osenv":"^0.1.3","stream":"0.0.2"},"devDependencies":{"eslint":"^2.x","eslint-config-apiconnect":"^2.x","tap":"^5.x"},"_id":"apiconnect-cli-logger@1.0.2","_shasum":"762c96f9560e979fc1a50af5bfa55c423106743d","_resolved":"file:.strong-registry/rel.cache/apiconnect-cli-logger/1.0.2/package.tgz","_from":".strong-registry/rel.cache/apiconnect-cli-logger/1.0.2/package.tgz","_npmVersion":"3.8.7","_nodeVersion":"4.3.2","_npmUser":{"name":"kraman","email":"kraman@gmail.com"},"dist":{"shasum":"762c96f9560e979fc1a50af5bfa55c423106743d","tarball":"https://registry.npmjs.org/apiconnect-cli-logger/-/apiconnect-cli-logger-1.0.2.tgz"},"maintainers":[{"name":"bajtos","email":"mbajtoss@gmail.com"},{"name":"chandadharap","email":"chanda_dharap@yahoo.com"},{"name":"ibmcloud-admin","email":"rmg@ca.ibm.com"},{"name":"jtary","email":"joseph.tary@gmail.com"},{"name":"kraman","email":"kraman@strongloop.com"},{"name":"octet","email":"vieuxtech@gmail.com"},{"name":"qpresley","email":"qpresley@ca.ibm.com"},{"name":"rfeng","email":"enjoyjava@gmail.com"},{"name":"ritch","email":"skawful@gmail.com"},{"name":"rmg","email":"r.m.graham@gmail.com"},{"name":"setogit","email":"setogit@gmail.com"},{"name":"tjsmith.us.ibm.com","email":"tjsmith@us.ibm.com"}],"_npmOperationalInternal":{"host":"packages-16-east.internal.npmjs.com","tmp":"tmp/apiconnect-cli-logger-1.0.2.tgz_1462581315294_0.04714735550805926"},"directories":{}},"1.1.0":{"name":"apiconnect-cli-logger","version":"1.1.0","description":"Common logger for API Connect Toolkit CLI","main":"logger.js","scripts":{"pretest":"eslint --ignore-path .gitignore .","test":"tap --bail --timeout=1000 ./test/test-*"},"repository":{"type":"git","url":"git@github.ibm.com:apimesh/apiconnect-cli-logger.git"},"author":{"name":"IBM API Mesh"},"license":"SEE LICENSE IN LICENSE.txt","bugs":{"url":"https://github.ibm.com/apimesh/apiconnect-cli-logger/issues"},"dependencies":{"bluebird":"^3.2.1","bunyan":"^1.7.1","colors":"^1.1.2","deep-extend":"^0.4.1","logrotate-stream":"^0.2.5","mkdirp":"^0.5.1","mv":"~2","osenv":"^0.1.3","stream":"0.0.2"},"devDependencies":{"eslint":"^2.x","eslint-config-apiconnect":"^2.x","tap":"^5.x"},"_id":"apiconnect-cli-logger@1.1.0","_shasum":"f1baa7dbf1e5acfe897eb6722f768616ea8316dc","_resolved":"file:../.strong-registry/rel.cache/apiconnect-cli-logger/1.1.0/package.tgz","_from":"../.strong-registry/rel.cache/apiconnect-cli-logger/1.1.0/package.tgz","_npmVersion":"3.8.9","_nodeVersion":"6.2.0","_npmUser":{"name":"kraman","email":"kraman@gmail.com"},"dist":{"shasum":"f1baa7dbf1e5acfe897eb6722f768616ea8316dc","tarball":"https://registry.npmjs.org/apiconnect-cli-logger/-/apiconnect-cli-logger-1.1.0.tgz"},"maintainers":[{"name":"bajtos","email":"mbajtoss@gmail.com"},{"name":"chandadharap","email":"chanda_dharap@yahoo.com"},{"name":"ibmcloud-admin","email":"rmg@ca.ibm.com"},{"name":"jtary","email":"joseph.tary@gmail.com"},{"name":"kraman","email":"kraman@strongloop.com"},{"name":"octet","email":"vieuxtech@gmail.com"},{"name":"qpresley","email":"qpresley@ca.ibm.com"},{"name":"rfeng","email":"enjoyjava@gmail.com"},{"name":"ritch","email":"skawful@gmail.com"},{"name":"rmg","email":"r.m.graham@gmail.com"},{"name":"setogit","email":"setogit@gmail.com"},{"name":"tjsmith.us.ibm.com","email":"tjsmith@us.ibm.com"}],"_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/apiconnect-cli-logger-1.1.0.tgz_1464752338368_0.0570100552868098"},"directories":{}},"1.1.1":{"name":"apiconnect-cli-logger","version":"1.1.1","description":"Common logger for API Connect Toolkit CLI","main":"logger.js","scripts":{},"repository":{"type":"git","url":"git@github.ibm.com:apimesh/apiconnect-cli-logger.git"},"author":{"name":"IBM API Mesh"},"license":"SEE LICENSE IN LICENSE.txt","bugs":{"url":"https://github.ibm.com/apimesh/apiconnect-cli-logger/issues"},"dependencies":{"bluebird":"^3.2.1","bunyan":"^1.7.1","colors":"^1.1.2","deep-extend":"^0.4.1","logrotate-stream":"^0.2.5","mkdirp":"^0.5.1","mv":"~2","osenv":"^0.1.3","stream":"0.0.2"},"devDependencies":{"eslint":"^2.x","eslint-config-apiconnect":"^2.x","tap":"^5.x"},"engines":{"node":">=0.12"},"_id":"apiconnect-cli-logger@1.1.1","_shasum":"92d32b34cc9a480d62b1b28d22ae6c529eef1735","_resolved":"file:../.strong-registry/rel.cache/apiconnect-cli-logger/1.1.1/package.tgz","_from":"../.strong-registry/rel.cache/apiconnect-cli-logger/1.1.1/package.tgz","_npmVersion":"3.9.5","_nodeVersion":"6.2.2","_npmUser":{"name":"kraman","email":"kraman@gmail.com"},"dist":{"shasum":"92d32b34cc9a480d62b1b28d22ae6c529eef1735","tarball":"https://registry.npmjs.org/apiconnect-cli-logger/-/apiconnect-cli-logger-1.1.1.tgz"},"maintainers":[{"name":"bajtos","email":"mbajtoss@gmail.com"},{"name":"behajian","email":"b.hajian@gmail.com"},{"name":"chandadharap","email":"chanda_dharap@yahoo.com"},{"name":"ibmcloud-admin","email":"rmg@ca.ibm.com"},{"name":"jtary","email":"joseph.tary@gmail.com"},{"name":"kjdelisle","email":"kjdelisle@gmail.com"},{"name":"kraman","email":"kraman@gmail.com"},{"name":"octet","email":"vieuxtech@gmail.com"},{"name":"pthieu","email":"pthieu@gmail.com"},{"name":"qpresley","email":"qpresley@ca.ibm.com"},{"name":"rfeng","email":"enjoyjava@gmail.com"},{"name":"ritch","email":"skawful@gmail.com"},{"name":"rmg","email":"r.m.graham@gmail.com"},{"name":"setogit","email":"setogit@gmail.com"},{"name":"tjsmith.us.ibm.com","email":"tjsmith@us.ibm.com"}],"_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/apiconnect-cli-logger-1.1.1.tgz_1470701890672_0.41262043034657836"},"directories":{}},"1.2.0":{"name":"apiconnect-cli-logger","version":"1.2.0","description":"Common logger for API Connect Toolkit CLI","main":"logger.js","scripts":{"pretest":"eslint --ignore-path .gitignore .","test":"tap --bail --timeout=1000 --reporter=spec ./test/test-*"},"repository":{"type":"git","url":"git@github.ibm.com:apimesh/apiconnect-cli-logger.git"},"author":{"name":"IBM API Mesh"},"license":"SEE LICENSE IN LICENSE.txt","bugs":{"url":"https://github.ibm.com/apimesh/apiconnect-cli-logger/issues"},"dependencies":{"bluebird":"^3.2.1","bunyan":"^1.7.1","colors":"^1.1.2","deep-extend":"^0.4.1","logrotate-stream":"^0.2.5","mkdirp":"^0.5.1","mv":"~2","osenv":"^0.1.3","stream":"0.0.2"},"devDependencies":{"eslint":"^2.x","eslint-config-apiconnect":"^2.x","tap":"^5.x"},"engines":{"node":">=0.12"},"gitHead":"5022fd4761edcf367bae4722bbed58eca0cbdc9e","_id":"apiconnect-cli-logger@1.2.0","_shasum":"473466cfee3ff410b141d17c6d86818d7245105d","_from":".","_npmVersion":"3.10.3","_nodeVersion":"4.5.0","_npmUser":{"name":"octet","email":"vieuxtech@gmail.com"},"dist":{"shasum":"473466cfee3ff410b141d17c6d86818d7245105d","tarball":"https://registry.npmjs.org/apiconnect-cli-logger/-/apiconnect-cli-logger-1.2.0.tgz"},"maintainers":[{"name":"bajtos","email":"mbajtoss@gmail.com"},{"name":"behajian","email":"b.hajian@gmail.com"},{"name":"chandadharap","email":"chanda_dharap@yahoo.com"},{"name":"ibmcloud-admin","email":"rmg@ca.ibm.com"},{"name":"jtary","email":"joseph.tary@gmail.com"},{"name":"kjdelisle","email":"kjdelisle@gmail.com"},{"name":"kraman","email":"kraman@gmail.com"},{"name":"octet","email":"vieuxtech@gmail.com"},{"name":"pthieu","email":"pthieu@gmail.com"},{"name":"qpresley","email":"qpresley@ca.ibm.com"},{"name":"rfeng","email":"enjoyjava@gmail.com"},{"name":"ritch","email":"skawful@gmail.com"},{"name":"rmg","email":"r.m.graham@gmail.com"},{"name":"setogit","email":"setogit@gmail.com"},{"name":"tjsmith.us.ibm.com","email":"tjsmith@us.ibm.com"}],"_npmOperationalInternal":{"host":"packages-16-east.internal.npmjs.com","tmp":"tmp/apiconnect-cli-logger-1.2.0.tgz_1474053530247_0.08065784745849669"},"directories":{}}},"readme":"# API Connect Toolkit logger\n\n## Basic usage\n\nThe logger supports the following levels:\n  * debug\n  * info\n  * warning\n  * error (or severe)\n  * fatal\n\nThey are exposed as methods on the logger object and can be used as `logger.info(...)` etc.\n\n## Default Logging Streams\n\nBy default, logs are streamed to the console and to `$APIC_CONFIG_PATH/apic.log`. If `$APIC_CONFIG_PATH` is not set, it is logged to `~/.apiconnect/apic.log`.\n\nThe console logging stream is prettified by the formatter stream in `lib/formatter.js`. To change the logging level of the console stream, you can set `LOG_LEVEL`.\n\nThe file logging stream consists of raw JSON logs. To see it in a readable format, you can run `cat ~/.apiconnect/apic.log | bunyan`. To change the logging level of the file stream, you can set `FILE_LOG_LEVEL`.\n\n## Configuring the logger\n\nThe logger can be customized with [environment variables](#environment-variables) or a configuration file.  The logger will look for a custom configuration file defined by `APIC_LOG_CONFIG_FILE`. If it does not exist, it looks in the default configuration directory: `~/.apiconnect/logger-config.js`.  The configuration file can be JSON or JS (.json/.js).\n\nThe default configuration is merged with user specified configuration, but the user specified configuration takes precedence. Default streams (stdout/file logger) cannot be replaced.\n\n### Supported Configuration\n\nThe configuration file is JSON based. You can configure the `bunyan` logger as well as the default bunyan `filelogger` stream.\n\n`bunyan`:\nRefer to [bunyan README](https://github.com/trentm/node-bunyan).\n\n`filelogger`:\n\n| key      | default                | description                                                                                                        |\n|----------|------------------------|--------------------------------------------------------------------------------------------------------------------|\n| size     | 50m                    | The max file size of a log before rotation occurs. Supports 1024, 1k, 1m, 1g                                       |\n| keep     | 10                     | The number of rotated log files to keep (including the primary log file). Additional logs are deleted no rotation. |\n| file     | ~/.apiconnect/apic.log | The file log file to write data to.                                                                                |\n| compress | false                  | Optionally compress rotated files with gzip.                                                                       |\n\n### Sample Config\n\nSample JSON config file (.json):\n```\n{\n  \"bunyan\": {\n    \"name\": \"custom logger\",\n    \"src\": \"false\",\n    \"streams\": [{\n      \"level\": \"debug\",\n      \"type\": \"file\",\n      \"path\": \"custom_file.log\"\n    }]\n  },\n  \"filelogger\": {\n    \"size\": \"1K\",\n    \"file\": \"custom.log\",\n    \"keep\": 5\n  }\n}\n```\n\nSample JS config file (.js):\n```\nmodule.exports =\n{\n  bunyan: {\n    name: 'userConnect',\n    streams: [{\n      level: 'debug',\n      type: 'file',\n      path: 'custom_file.log'\n    }]\n  },\n  filelogger: {\n    file: 'custom.log',\n    size: '50M',\n    keep: 10\n  }\n};\n\n```\n_Note: If you have both `logger-config.json` and `logger-config.js`, the JSON file takes priority._\n\n## Console Output\n\nThe logger provides two methods to write to console `logger.writeln` and `logger.write`.\nBoth these methods will write to stdout and log output to the log file.\n\n## Flushing logs\n\nThe logger provides `logger.flush()` and `logger.exit(exitCode)` methods which should be called before the CLI exits in\norder to ensure that all logs are written to disk. Both methods return a Promise object.\n\n## Environment variables\n\n- `LOG_LEVEL` specifies the lowest level of messages logged to the console stream.\n - deprecated `APIC_LOG_CONSOLE_LEVEL`\n- `FILE_LOG_LEVEL` specifies the lowest level of messages logged to the `apic.log` log file.\n - deprecated `APIC_LOG_FILE_LEVEL`\n- `APIC_CONFIG_PATH` specifies the directory path containing the system logging configuration file `logger-config.json`.\n- `APIC_LOG_CONFIG_FILE` specifies the path of the user-level logging configuration.\n","maintainers":[{"name":"bajtos","email":"mbajtoss@gmail.com"},{"name":"behajian","email":"b.hajian@gmail.com"},{"name":"chandadharap","email":"chanda_dharap@yahoo.com"},{"name":"ibmcloud-admin","email":"rmg@ca.ibm.com"},{"name":"jtary","email":"joseph.tary@gmail.com"},{"name":"kjdelisle","email":"kjdelisle@gmail.com"},{"name":"kraman","email":"kraman@gmail.com"},{"name":"octet","email":"vieuxtech@gmail.com"},{"name":"pthieu","email":"pthieu@gmail.com"},{"name":"qpresley","email":"qpresley@ca.ibm.com"},{"name":"rfeng","email":"enjoyjava@gmail.com"},{"name":"ritch","email":"skawful@gmail.com"},{"name":"rmg","email":"r.m.graham@gmail.com"},{"name":"setogit","email":"setogit@gmail.com"},{"name":"tjsmith.us.ibm.com","email":"tjsmith@us.ibm.com"}],"time":{"modified":"2016-09-23T00:09:12.666Z","created":"2016-03-21T18:11:25.030Z","1.0.1":"2016-03-21T18:11:25.030Z","1.0.2":"2016-05-07T00:35:16.992Z","1.1.0":"2016-06-01T03:39:01.262Z","1.1.1":"2016-08-09T00:18:10.924Z","1.2.0":"2016-09-16T19:18:53.852Z"},"repository":{"type":"git","url":"git@github.ibm.com:apimesh/apiconnect-cli-logger.git"},"author":{"name":"IBM API Mesh"},"bugs":{"url":"https://github.ibm.com/apimesh/apiconnect-cli-logger/issues"},"license":"SEE LICENSE IN LICENSE.txt","readmeFilename":"README.md","_attachments":{},"_etag":"\"5JHFG0MHHP2J67EJJIZHMILR9\"","_cached":true}